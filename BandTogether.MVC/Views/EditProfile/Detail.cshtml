@using BandTogether.Models.SchoolModels;
@model BandTogether.Models.TeacherModels.TeacherDetail

@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_BandTogetherLayout.cshtml";
    var base64 = Convert.ToBase64String(Model.ImageData);
    var contentType = Model.ContentType;
    var imgSrc = String.Format($"data:{contentType};base64,{base64}");
}


<div class="">
    <h2>@Model.FirstName @Model.LastName</h2>
</div>
<div class="">
    @Html.ActionLink("Edit", "EditName", "EditProfile", new { id = Model.TeacherId }, null)
</div>


    <div class="profile-pic">
@if (Model.FileName == "")
{
        <img src="~/Assets/noprofilepic.jpg" alt="" />
}
else
{
    <img src="@imgSrc" alt="@Model.FileName" class="profile-pic" />
}
    </div>
<div class="">
    @Html.ActionLink("Edit", "EditPicture", "EditProfile", new { id = Model.TeacherId }, null)
</div>

@if (Model.Schools.Count != 0)
{
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Schools.Single().SchoolName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Schools.Single().City)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Schools.Single().State)
            </th>
        </tr>
        @foreach (var item in Model.Schools)
        {
            <tr>
                <td>
                    @Html.ActionLink(@Html.DisplayFor(modelItem => item.SchoolName).ToHtmlString(), "Detail", "Teacher", null, null)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.City)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.State)
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", "School") |
                    @Html.ActionLink("Delete", "Delete", "School")
                </td>
            </tr>
        }
    </table>
}
else
{
    <p>You have not added any schools.</p>
}
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#create-school">Add School</button>
<div class="modal" id="create-school" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @{Html.RenderPartial("CreateSchool", new SchoolCreate());}
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}



